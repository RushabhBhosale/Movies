(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[303],{4477:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{callServer:function(){return s.callServer},createServerReference:function(){return n},findSourceMapURL:function(){return a.findSourceMapURL}});let s=r(3806),a=r(1818),n=r(4979).createServerReference},5013:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>u});var s=r(5155),a=r(2115),n=r(4477);let i=(0,n.createServerReference)("40c00ed798736edebe573d4143c8b58ca79b126333",n.callServer,void 0,n.findSourceMapURL,"subscribeUser"),l=(0,n.createServerReference)("008a19230834dbebec59d5144dad255af336e6809f",n.callServer,void 0,n.findSourceMapURL,"unsubscribeUser"),c=(0,n.createServerReference)("4047a36101a574e945b12ac62ebd4d983dfae9d504",n.callServer,void 0,n.findSourceMapURL,"sendNotification");function o(){let[e,t]=(0,a.useState)(!1),[r,n]=(0,a.useState)(!1),[i,l]=(0,a.useState)(null),[c,o]=(0,a.useState)(!1),[d,u]=(0,a.useState)(!1);(0,a.useEffect)(()=>{let e=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream;t(e);let r=window.matchMedia("(display-mode: standalone)").matches;n(r);let s=e=>{e.preventDefault(),l(e),r||o(!0)};return e&&!r&&setTimeout(()=>{u(!0)},1e3),window.addEventListener("beforeinstallprompt",s),()=>{window.removeEventListener("beforeinstallprompt",s)}},[]);let b=async()=>{if(i){i.prompt();let{outcome:e}=await i.userChoice;"accepted"===e&&o(!1),l(null)}},x=()=>{o(!1),u(!1)};return r?null:(0,s.jsxs)(s.Fragment,{children:[c&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,s.jsx)("div",{className:"bg-white rounded-lg p-6 max-w-sm w-full shadow-xl",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Install App"}),(0,s.jsx)("p",{className:"text-gray-600 mb-4",children:"Install this app on your device for a better experience!"}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)("button",{onClick:b,className:"flex-1 bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition-colors",children:"Install"}),(0,s.jsx)("button",{onClick:x,className:"flex-1 bg-gray-300 text-gray-700 px-4 py-2 rounded-md hover:bg-gray-400 transition-colors",children:"Maybe Later"})]})]})})}),d&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,s.jsx)("div",{className:"bg-white rounded-lg p-6 max-w-sm w-full shadow-xl",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Install App"}),(0,s.jsx)("p",{className:"text-gray-600 mb-4",children:"To install this app on your iOS device:"}),(0,s.jsx)("div",{className:"text-left text-sm text-gray-700 mb-4",children:(0,s.jsxs)("ol",{className:"list-decimal list-inside space-y-2",children:[(0,s.jsxs)("li",{children:["Tap the Share button"," ",(0,s.jsx)("span",{className:"text-blue-500",children:"⎋"})," at the bottom of the screen"]}),(0,s.jsxs)("li",{children:['Scroll down and tap "Add to Home Screen"'," ",(0,s.jsx)("span",{className:"text-blue-500",children:"➕"})]}),(0,s.jsx)("li",{children:'Tap "Add" in the top right corner'})]})}),(0,s.jsx)("button",{onClick:x,className:"w-full bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition-colors",children:"Got it!"})]})})}),(0,s.jsxs)("div",{className:"mt-8 p-4 border border-gray-200 rounded-lg",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Install App"}),i?(0,s.jsx)("button",{onClick:b,className:"bg-green-500 text-white px-4 py-2 rounded-md hover:bg-green-600 transition-colors",children:"Add to Home Screen"}):(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"Install this app for a better experience"}),e&&(0,s.jsxs)("p",{className:"text-sm text-gray-500",children:["On iOS: Tap Share ",(0,s.jsx)("span",{className:"text-blue-500",children:"⎋"}),' then "Add to Home Screen" ',(0,s.jsx)("span",{className:"text-blue-500",children:"➕"})]})]})]})]})}function d(){let[e,t]=(0,a.useState)(!1),[r,n]=(0,a.useState)(null),[o,d]=(0,a.useState)("");async function u(){try{let e=await navigator.serviceWorker.register("/sw.js",{scope:"/",updateViaCache:"none"}),t=await e.pushManager.getSubscription();n(t)}catch(e){console.error("Service worker registration failed:",e)}}async function b(){try{let e=await navigator.serviceWorker.ready,t=await e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:function(e){let t="=".repeat((4-e.length%4)%4),r=(e+t).replace(/-/g,"+").replace(/_/g,"/"),s=window.atob(r),a=new Uint8Array(s.length);for(let e=0;e<s.length;++e)a[e]=s.charCodeAt(e);return a}("BGacPTELpVejf_c8ew8Mddj2SsNBrJSUBEbhz6T0ZnAsaZTc405pqim7R4o26vrIojK9GXXMfqRdzcMisZK_Zzc")});n(t);let r=JSON.parse(JSON.stringify(t));await i(r)}catch(e){console.error("Push subscription failed:",e)}}async function x(){try{await (null==r?void 0:r.unsubscribe()),n(null),await l()}catch(e){console.error("Unsubscribe failed:",e)}}async function h(){if(r&&o.trim())try{await c(o),d("")}catch(e){console.error("Send notification failed:",e)}}return((0,a.useEffect)(()=>{"serviceWorker"in navigator&&"PushManager"in window&&(t(!0),u())},[]),e)?(0,s.jsxs)("div",{className:"p-4 border border-gray-200 rounded-lg",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Push Notifications"}),r?(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("p",{className:"text-green-600",children:"✓ You are subscribed to push notifications."}),(0,s.jsx)("button",{onClick:x,className:"bg-red-500 text-white px-4 py-2 rounded-md hover:bg-red-600 transition-colors",children:"Unsubscribe"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("input",{type:"text",placeholder:"Enter notification message",value:o,onChange:e=>d(e.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,s.jsx)("button",{onClick:h,disabled:!o.trim(),className:"bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Send Test"})]})]}):(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-gray-600 mb-2",children:"You are not subscribed to push notifications."}),(0,s.jsx)("button",{onClick:b,className:"bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition-colors",children:"Subscribe"})]})]}):(0,s.jsx)("div",{className:"p-4 border border-gray-200 rounded-lg",children:(0,s.jsx)("p",{className:"text-gray-600",children:"Push notifications are not supported in this browser."})})}function u(){return(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,s.jsxs)("div",{className:"max-w-md mx-auto px-4 space-y-6",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"My PWA App"}),(0,s.jsx)("p",{className:"text-gray-600",children:"A Progressive Web App built with Next.js"})]}),(0,s.jsx)(o,{}),(0,s.jsx)(d,{})]})})}},7979:(e,t,r)=>{Promise.resolve().then(r.bind(r,5013))}},e=>{var t=t=>e(e.s=t);e.O(0,[441,684,358],()=>t(7979)),_N_E=e.O()}]);